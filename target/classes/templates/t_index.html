<html xmlns:th="http://www.thymeleaf.org">

<head>
<title>test</title>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

<script src = "/webjars/jquery/jquery.min.js"></script>
	<script src = "/webjars/bootstrap/js/bootstrap.min.js"></script>
	<script src="/webjars/sockjs-client/sockjs.min.js"></script>
    <script src="/webjars/stomp-websocket/stomp.min.js"></script>
	
	<script th:src="@{/node_modules/kuroshiro/dist/kuroshiro.min.js}"></script>
	<script th:src="@{/node_modules/kuroshiro-analyzer-kuromoji/dist/kuroshiro-analyzer-kuromoji.min.js}"></script>
	

	
	<script type="text/javascript">

    
	var player;

	// this function gets called when API is ready to use
	function onYouTubePlayerAPIReady() {
	  // create the global player from the specific iframe (#video)
	  player = new YT.Player('video', {
	    events: {
	      // call this function when player is ready to use
	      'onReady': onPlayerReady
	    }
	  });
	}

	function onPlayerReady(event) {
	  
	  // bind events
	  var playButton = document.getElementById("play-button");
	  playButton.addEventListener("click", function() {
	    player.playVideo();
	  });
	  
	  var pauseButton = document.getElementById("pause-button");
	  pauseButton.addEventListener("click", function() {
	    player.pauseVideo();
	  });
	  
	}

	// Inject YouTube API script
	var tag = document.createElement('script');
	tag.src = "//www.youtube.com/player_api";
	var firstScriptTag = document.getElementsByTagName('script')[0];
	firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
	

	var settings = {
			  "url": "https://drive.google.com/timedtext?lang=ja&fmt=json3&authuser=0&id=1WyP4gXrZshi4OB6WZwb5HGxUuyLW_bDU&vid=a4beab8648bb21f5&hl=ru-RU&v=1WyP4gXrZshi4OB6WZwb5HGxUuyLW_bDU&type=track&name=%D0%AF%D0%BF%D0%BE%D0%BD%D1%81%D0%BA%D0%B8%D0%B9&kind",
			  "method": "GET",
			  "timeout": 0,
			  "headers": {
				  "Access-Control-Allow-Origin": "application/json",
			    "Cookie": "NID=203=cjoJyC328IiAIx2PLhe6bVwwZeMRaRBNFGD2b4kbUk3ZbVxTIT6n3aoqbfYa18wKVhFxeoexcwlzeas-xX9wz-DIsNeqb-snAEYu2gU2ERMqSb-yq9guTgO6AkD50QGTQmD2mioEMWj_MeNdaBF_em8oj99DFPxirJpHgIu67tM"
			  },
			};

	$.ajax(settings).done(function (response) {
	  console.log(response.events);
	  
	  var subs = document.getElementById("list")
	  response.events.forEach(function (item){

	  var node = document.createElement("LI");
	  var span = document.createElement("SPAN");
	  span.className += "glyphicon glyphicon-play-circle play-icon play-icon-played";
	  span.setAttribute("onclick", "seekTo(" + item.tStartMs/1000 + ")");
	  var textnode = document.createTextNode(" " + item.segs[0].utf8); 
	  node.appendChild(span);
	  node.appendChild(textnode);                           
	  subs.appendChild(node);     
		
		    	/*subs.innerHTML += "<li>[" + msToTime(item.tStartMs) + " - " + 
				msToTime(item.tStartMs + item.dDurationMs) + "] " +
				item.segs[0].utf8 +"</li>";*/
	 			  
	  });		  
	});

	
	function msToTime(duration) {
		  var milliseconds = parseInt((duration % 1000) / 100),
		    seconds = Math.floor((duration / 1000) % 60),
		    minutes = Math.floor((duration / (1000 * 60)) % 60),
		    hours = Math.floor((duration / (1000 * 60 * 60)) % 24);

		  hours = (hours < 10) ? "0" + hours : hours;
		  minutes = (minutes < 10) ? "0" + minutes : minutes;
		  seconds = (seconds < 10) ? "0" + seconds : seconds;

		  return minutes + ":" + seconds + "." + milliseconds;
		}
	
     </script>
     
     <script th:src="@{/js/test/socketTest.js}"></script>

<style>
ul { list-style: none; padding-inline-start: 0px;}

li {
border-bottom-style: dotted;
border-width: 1px;	
margin-top : 1px;
padding : 5px;
font-size: 1.2em;
}
</style>


</head>

<body>

<div class="container-fluid" style="margin-top:50px">
  <div class="row" >
  
    <div class="col-md-8">
		<iframe id ="video" width="800" height="450" src="https://www.youtube.com/embed/OnzRH_25gpI?enablejsapi=1&html5=1" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>
		<h1>Youtube video Play/Stop</h1>
		
		<button id="play-button">play</button>
		<button id="pause-button">pause</button>

    </div>

    <div class="col-md-4"   style="overflow-x:scroll; height:500px;"> 
 			<ul id = "list">
 			
 			</ul>

    </div>
    
  </div>
</div>





</body>

</html>